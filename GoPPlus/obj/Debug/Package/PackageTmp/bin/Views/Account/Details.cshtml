@model GoPS.Models.AspNetUsers
@using GoPS.Helpers;

@{
    ViewBag.Title = "Ver Detalles de Usuario";
}

@Html.Hidden("Permiso", "General")
<div class="main">
    @{Html.RenderPartial("NavBar_CatAccount", "Detalles"); }
    <div class="row">
        <div class="col-lg-12">
            <div>
                <hr />
                <dl class="dl-horizontal">

                    <dt>
                        @Html.DisplayNameFor(model => model.UserName)
                    </dt>

                    @if (ViewBag.role.ToUpper() == ("DRIVER"))
                    {
                        <dd>                            
                            <img class="db-image" src="~/images/Uploads/@Model.PicturePath" alt=" " />
                            @Html.DisplayFor(model => model.UserName)
                        </dd>
                    }
                    else
                    {
                            <dd>
                                @Html.DisplayFor(model => model.UserName)
                            </dd>
                    }


                    <dd>
                        @Html.DisplayFor(model => model.UserName)
                    </dd>
                    <dt>
                        @Html.DisplayNameFor(model => model.Email)
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.Email)
                    </dd>

                    <dt>
                        @Html.DisplayNameFor(model => model.EmailConfirmed)
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.EmailConfirmed)
                    </dd>

                    <dt>
                        @Html.DisplayNameFor(model => model.PhoneNumber)
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.PhoneNumber)
                    </dd>                    

                    <dt>
                        @Html.DisplayNameFor(model => model.DateOfBirth)
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.DateOfBirth)
                    </dd>

                    <dt>
                        @Html.DisplayNameFor(model => model.PositionID)
                    </dt>

                    <dd>
                       @Html.DisplayFor(model => model.Positions.Position)
                    </dd>                   

                    <dt>
                        @Html.Label("Perfil")
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.AspNetUserRoles.FirstOrDefault().AspNetRoles.Name)
                    </dd>

                    @if (ViewBag.role.ToUpper()==("ADMINISTRADOR") || ViewBag.role.ToUpper().StartsWith("CE") || ViewBag.role.ToUpper().StartsWith("DR"))
                    {
                        <dt>
                            @Html.Label("Afiliados")
                        </dt>
                        foreach (var item in ViewBag.afiliados)
                        {
                            <dd>
                               @Html.DisplayFor(modelItem => item)
                            </dd>
                        }                        
                    }                 
                   
                    <dt>
                        @Html.Label("Último Login")
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.LastLoginDate)
                    </dd>

                    <dt>
                        @Html.Label("Último Logout")
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.LastLogoutDate)
                    </dd>

                    <dt>
                        @Html.Label("Estatus:")
                    </dt>

                    @if (Model.IsLoged_in == true)
                    {
                        <dd>
                            @Html.Label("Online", new { @class = "btn-sm btn-success" })
                        </dd>
                    }
                    else
                    {
                        <dd>
                            @Html.Label("Offline",new { @class = "btn btn-sm btn-danger" })
                        </dd>
                    }

                </dl>
            </div>
            <p class="div_actions">
                @Html.EncodedActionLink("Editar", "Edit", "Account", new { id = Model.newId }, new { @class = "_Edicion" })<span class="_Edicion pipe"> | </span>
                @Html.ActionLink("Regresar", "Index", null, new { @class = "_Visualizacion" })
            </p>
        </div>
    </div>
</div>